<%@page contentType="text/html; charset=UTF-8"%>
<%-- Core ë¼ì´ë¸ŒëŸ¬ë¦¬ (íƒœê·¸ë“¤ì´ "c:"ë¡œ ì‹œì‘)--%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%--Functions ë¼ì´ë¸ŒëŸ¬ë¦¬--%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<html lang="ko" class="translated-ltr" data-darkreader-proxy-injected="true"><head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="icon" href="../img/pages/icon.png" type="image/png">
   <title>ë‚˜ì˜ í†µê³„</title>
   <!-- Bootstrap Css -->
   <link rel="stylesheet" href="../vender/bootstrap/css/bootstrap.min.css">
   <!-- Icofont Css -->
   <link rel="stylesheet" href="../vender/icofont/icofont.min.css">
   <!-- AOS Css -->
   <link rel="stylesheet" href="../vender/aos/dist/aos.css">
   <!-- Remix Icons -->
   <link rel="stylesheet" href="../vender/remixicon/remixicon.css">
   <!-- Custom Css -->
   <link rel="stylesheet" href="../css/style.css">
   <link rel="stylesheet" href="../css/style2.css">
   <!-- Common Css -->
   <link rel="stylesheet" href="../css/common.css">
   <link type="text/css" rel="stylesheet" charset="UTF-8" href="https://www.gstatic.com/_/translate_http/_/ss/k=translate_http.tr.26tY-h6gH9w.L.W.O/am=GAY/d=0/rs=AN8SPfrev-A3NvrBP0gNq8zXCqKY7IcBLA/m=el_main_css"><style>
   .custom-btn {
      font-size: 1.2rem;
      padding: 0.75rem 1.5rem;
      color: white;
      border: none;
      transition: all 0.3s ease;
   }

   .btn-bestseller {
      background-color: #f77808d9;
   }

   .btn-recommend {
      background-color: #D35400; /* ì§™ì€ ì£¼í™©ìƒ‰ */
   }

   .btn-register {
      background-color: #F39C12; /* í™©ê¸ˆë¹› ì£¼í™©ìƒ‰ */
   }

   .btn-bestseller:hover {
      background-color: #e56c07;
      color: white;
   }

   .btn-recommend:hover {
      background-color: #b94b00;
      color: white;
   }

   .btn-register:hover {
      background-color: #d68910;
      color: white;
   }

   .custom-btn:hover {
      opacity: 0.9;
      transform: translateY(-2px);
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
   }

   .justify-content-center2 {
      justify-content: center !important;
      margin-top: 150px;
   }
   /* [0808 ìˆ˜ì •] */
   /* nav ì»¬ëŸ¬ ë³€ê²½ + ë¬¼ê²° ë³€ê²½ */
   .bg-black {
       background-color: #8fbc8f !important;
   }
   .hero-wave {
       width: 100%;
       display: block;
       margin-bottom: -200px;
   }

   .top-header {
       background-color: #abd1ab;
       padding-top: 100px; /* ìƒë‹¨ ì—¬ë°± ì¡°ì • */
       padding-bottom: 0;
   }
   
   /* [0809 ì¶”ê°€] */
   body {
       min-height: 100vh;
       display: flex;
       flex-direction: column;
   }

   #elements {
       flex: 1;
   }

   footer {
       margin-top: auto;
   }
</style>
</head>
<body data-aos-easing="ease" data-aos-duration="400" data-aos-delay="0">
	<div class="bg-elements elements-top-header">
	   <!-- navbar -->
	   <div class="elements-nav">
	      <!-- bootom nav -->
	      <%@ include file="../header.jsp" %>
	   </div>
	   <!-- header -->
	   <div class="row justify-content-center">
	      <div class="col-xl-6 col-lg-5 col-md-10 col-12">
	         <div class="d-flex gap-3 align-items-center"></div>
	      </div>
	   </div>
   </div>
	   <div class="top-header">
	      <div class="w-100">
	           <img src="../img/pages/hero-wave.svg" alt="" class="img-fluid w-100">
	       </div>
	   </div>
<!-- Elements Components -->
<div class="py-5" id="elements">
    <div class="container">
        <h1 class="text-center mb-4 my-stats-title stats-main-title custom-margin">ğŸ“Š ë‚˜ì˜ í†µê³„ ğŸ“Š</h1>
        <c:if test="${not empty sessionScope.userId}">
            <h4 class="elements-title fw-bold mb-4 text-center chart-title">ì›”ë³„ ë…ì„œëŸ‰</h4>
        </c:if>
    </div> <!-- /.container -->

    <c:choose>
        <%--ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í–ˆê³ , ì½ì€ ì±…ì´ ì—†ì„ë•Œì˜ (userStatVOê°€ ë¹„ì–´ìˆë‹¤ë©´) í™”ë©´--%>
        <c:when test="${not empty sessionScope.userId}">
            <c:if test="${empty userStatVO}">
                <div class="container">
                    <div class="col-lg-6">
                        <h4 class="elements-title fw-bold mb-4">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">ì•„ì§ ì½ì€ ì±…ì´ ì—†ìŠµë‹ˆë‹¤</font>
                            </font>
                        </h4>
                    </div>
                </div> <!-- /.container -->
                <div id="without-data">
                    <div class="d-flex justify-content-center2">
                        <a href="#" class="btn custom-btn btn-bestseller mx-2">ë² ìŠ¤íŠ¸ì…€ëŸ¬ êµ¬ê²½í•˜ëŸ¬ ê°€ê¸°</a>
                        <a href="#" class="btn custom-btn btn-recommend mx-2">ì¶”ì²œ ë°›ê¸°</a>
                        <a href="#" class="btn custom-btn btn-register mx-2">ì½ì€ ì±… ë“±ë¡í•˜ê¸°</a>
                    </div>
                </div> <!-- /#without-data -->
            </c:if>

            <%--ì½ì€ ì±…ì´ ìˆì„ë•Œì˜ í™”ë©´--%>
            <c:if test="${not empty userStatVO}">
                <div class="container">
                    <div class="row g-5">
                        <div class="col-lg-6">
                            <div class="chart-container">
                                <div style="height: 70px;"></div>
                                <canvas id="myChart1"></canvas>
                            </div>
                            <h4 class="elements-title fw-bold mb-4 mt-3 text-center chart-title">ê¶Œìˆ˜ë³„ í†µê³„</h4>
                        </div>
                        <div class="col-lg-6">
                            <div class="chart-container">
                                <div style="height: 70px;"></div>
                                <canvas id="myChart2"></canvas>
                            </div>
                            <h4 class="elements-title fw-bold mb-4 mt-3 text-center chart-title">í˜ì´ì§€ë³„ í†µê³„</h4>
                        </div>
                    </div> <!-- /.row -->
                </div> <!-- /.container -->
            </c:if>
        </c:when>

        <%--ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°ì˜ í™”ë©´--%>
		<c:otherwise>
            <div class="text-center py-5">
                <h3 class="text-muted">ë¡œê·¸ì¸ í›„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</h3>
            </div>
            <div id="without-data">
                <div class="container text-center mt-4">
                    <a href="/pages/login" class="btn btn-primary btn-lg">ë¡œê·¸ì¸ í•˜ëŸ¬ ê°€ê¸°</a>
                </div>
            </div>
        </c:otherwise>
    </c:choose>
</div> <!-- /.py-5 #elements -->



<!-- í‘¸í„° í¬í•¨ -->
<footer class="footer-container text-white py-3">
   <div class="container">
      <div class="row">
         <div class="col-md-6 mb-2 mb-md-0">
            <p class="mb-0">
               <small>
                  ìœ„ì¹˜: ì„œìš¸ ë§ˆí¬êµ¬ ë°±ë²”ë¡œ 23<br>
                  ì—°ë½ì²˜: 02-739-7235 | ì´ë©”ì¼: hi@bookbookbook.com<br>
                  ì´ìš©ì•½ê´€ | ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨
               </small>
            </p>
         </div>
      </div>
   </div>
</footer>

<style>
   .footer-container{
      background-color: #e74c3c;
   }

   @font-face {
      font-family: 'DungGeunMo';
      src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff') format('woff');
      font-weight: normal;
      font-style: normal;
   }

   footer{
      font-family: 'DungGeunMo';
   }
   .chart-container {
          position: relative;
          margin: auto;
          height: 400px;
          width: 100%;
      }
      
      .chart-title {
          margin-top: 20px;
          text-align: center;
      }

	  /*
      .custom-margin {
          margin-bottom: 4rem !important;
      }
	  */
	  
	  .chart-title {
	      margin-bottom: 2rem; /* ë˜ëŠ” ì›í•˜ëŠ” í¬ê¸°ë¡œ ì¡°ì • */
	  }

	  .chart-spacer {
	      height: 3rem; /* ë˜ëŠ” ì›í•˜ëŠ” í¬ê¸°ë¡œ ì¡°ì • */
	  }
	  /* [0808 ìˆ˜ì •] */
		/* nav ì»¬ëŸ¬ ë³€ê²½ + ë¬¼ê²° ë³€ê²½ */
		.bg-black {
		    background-color: #8fbc8f !important;
		}
		.hero-wave {
		    width: 100%;
		    display: block;
		    margin-bottom: -200px;
		}
	
		.top-header {
		    background-color: #abd1ab;
		    padding-top: 100px; /* ìƒë‹¨ ì—¬ë°± ì¡°ì • */
		    padding-bottom: 0;
		}
		/* [0809 ì¶”ê°€] */
		body {
	        min-height: 100vh;
	        display: flex;
	        flex-direction: column;
	    }

	    #elements {
	        flex: 1;
	    }

	    footer {
	        margin-top: auto;
	    }
		.btn-primary {
		    background-color: #f77808d9;
		    border-color: #f77808d9;
		    color: white;
		    padding: 10px 20px;
		    font-size: 18px;
		    border-radius: 5px;
		    text-decoration: none;
		    transition: background-color 0.3s ease;
		}
</style>
<style class="darkreader darkreader--sync" media="screen"></style>

<!-- Bootsrap Bundle Js -->
<script src="../vender/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- Jquery Js -->
<script src="../vender/jquery/jquery-3.6.4.min.js"></script>
<!-- AOS Js -->
<script src="../vender/aos/dist/aos.js"></script>
<!-- Custom Js -->
<script src="../js/script.js"></script><button id="back-to-top" title="Go to top">Top</button><button id="back-to-top" title="Go to top">Top</button><button id="back-to-top" title="Go to top" style="display: block;">Top</button><button id="back-to-top" title="Go to top" style="display: block;">Top</button><button id="back-to-top" title="Go to top">Top</button><button id="back-to-top" title="Go to top" style="display: none;">Top</button><button id="back-to-top" title="Go to top" style="display: none;">Top</button><button id="back-to-top" title="Go to top" style="display: none;">Top</button><button id="back-to-top" title="Go to top" style="display: none;">Top</button><button id="back-to-top" title="Go to top">Top</button><button id="back-to-top" title="Go to top">Top</button><button id="back-to-top" title="Go to top" style="display: none;">Top</button><button id="back-to-top" title="ìœ„ë¡œ ì´ë™" style="display: block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TOP</font></font></button><div id="goog-gt-tt" class="VIpgJd-yAWNEb-L7lbkb skiptranslate" style="border-radius: 12px; margin: 0 0 0 -23px; padding: 0; font-family: 'Google Sans', Arial, sans-serif;" data-id=""><div id="goog-gt-vt" class="VIpgJd-yAWNEb-hvhgNd"><div class=" VIpgJd-yAWNEb-hvhgNd-l4eHX-i3jM8c"><img src="https://fonts.gstatic.com/s/i/productlogos/translate/v14/24px.svg" width="24" height="24" alt=""></div><div class=" VIpgJd-yAWNEb-hvhgNd-k77Iif-i3jM8c"><div class="VIpgJd-yAWNEb-hvhgNd-IuizWc" dir="ltr">ì›ë³¸ í…ìŠ¤íŠ¸</div><div id="goog-gt-original-text" class="VIpgJd-yAWNEb-nVMfcd-fmcmS VIpgJd-yAWNEb-hvhgNd-axAV1"></div></div><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid ltr"><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid-B7I4Od ltr" dir="ltr"><div class="VIpgJd-yAWNEb-hvhgNd-UTujCb">ë²ˆì—­ í‰ê°€</div><div class="VIpgJd-yAWNEb-hvhgNd-eO9mKe">ë³´ë‚´ì£¼ì‹  ì˜ê²¬ì€ Google ë²ˆì—­ì„ ê°œì„ í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</div></div><div class="VIpgJd-yAWNEb-hvhgNd-xgov5 ltr"><button id="goog-gt-thumbUpButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="ë²ˆì—­ í’ˆì§ˆ ì¢‹ìŒ" aria-label="ë²ˆì—­ í’ˆì§ˆ ì¢‹ìŒ" aria-pressed="false"><span id="goog-gt-thumbUpIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7H2v13h16c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM7 18H4V9h3v9zm14-7l-3 7H9V8l4.34-4.34L12 9h9v2z"></path></svg></span><span id="goog-gt-thumbUpIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7v13h11c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM5 7H1v13h4V7z"></path></svg></span></button><button id="goog-gt-thumbDownButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="ë²ˆì—­ í’ˆì§ˆ ì¢‹ì§€ ì•ŠìŒ" aria-label="ë²ˆì—­ í’ˆì§ˆ ì¢‹ì§€ ì•ŠìŒ" aria-pressed="false"><span id="goog-gt-thumbDownIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7h5V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zM17 6h3v9h-3V6zM3 13l3-7h9v10l-4.34 4.34L12 15H3v-2z"></path></svg></span><span id="goog-gt-thumbDownIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zm16 0h4V4h-4v13z"></path></svg></span></button></div></div><div id="goog-gt-votingHiddenPane" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><form id="goog-gt-votingForm" action="//translate.googleapis.com/translate_voting?client=te_lib" method="post" target="votingFrame" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><input type="text" name="sl" id="goog-gt-votingInputSrcLang"><input type="text" name="tl" id="goog-gt-votingInputTrgLang"><input type="text" name="query" id="goog-gt-votingInputSrcText"><input type="text" name="gtrans" id="goog-gt-votingInputTrgText"><input type="text" name="vote" id="goog-gt-votingInputVote"></form><iframe name="votingFrame" frameborder="0"></iframe></div></div></div>

</body></html>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!--ì›”ë³„ ê¶Œìˆ˜ ì°¨íŠ¸-->
<script>
   // ë°ì´í„°ì™€ ì›” ì •ë³´ë¥¼ ì €ì¥í•  ë°°ì—´ ì´ˆê¸°í™”
   let datax = [];
   let monthx = [];
   // JSPì˜ JSTLì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì€ ë°ì´í„°ë¥¼ JavaScript ë°°ì—´ì— ì¶”ê°€
   <c:forEach items="${userStatVO2}" var="vo">
   datax.push(${vo.bookCount}); // ê° ì›”ì˜ ì±… ìˆ˜ë¥¼ datax ë°°ì—´ì— ì¶”ê°€
   monthx.push(${vo.bookMonth}+'ì›”'); // ì›” ì •ë³´ë¥¼ monthx ë°°ì—´ì— ì¶”ê°€
   </c:forEach>


   // 'myChart1' IDë¥¼ ê°€ì§„ ìº”ë²„ìŠ¤ ìš”ì†Œë¥¼ ê°€ì ¸ì˜´
   const ctx = document.getElementById('myChart1');
   // Chart.jsë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ì°¨íŠ¸ ìƒì„±
   new Chart(ctx, {
      type: 'bar',
      data: {
         labels: monthx,
         datasets: [{
            label: 'ê¶Œìˆ˜ë³„ ì½ì€ ì±…',
            data: datax,
            borderWidth: 1,
            backgroundColor: [
               'rgba(255, 99, 132, 0.2)',
               'rgba(255, 159, 64, 0.2)',
               'rgba(255, 205, 86, 0.2)',
               'rgba(75, 192, 192, 0.2)',
               'rgba(54, 162, 235, 0.2)',
               'rgba(153, 102, 255, 0.2)',
               'rgba(201, 203, 207, 0.2)',
               'rgba(255, 138, 101, 0.2)',
               'rgba(100, 181, 246, 0.2)',
               'rgba(165, 214, 167, 0.2)',
               'rgba(240, 98, 146, 0.2)',
               'rgba(187, 143, 206, 0.2)'
            ],
            borderColor: [
               'rgba(255, 99, 132, 0.2)',
               'rgba(255, 159, 64, 0.2)',
               'rgba(255, 205, 86, 0.2)',
               'rgba(75, 192, 192, 0.2)',
               'rgba(54, 162, 235, 0.2)',
               'rgba(153, 102, 255, 0.2)',
               'rgba(201, 203, 207, 0.2)',
               'rgba(255, 138, 101, 0.2)',
               'rgba(100, 181, 246, 0.2)',
               'rgba(165, 214, 167, 0.2)',
               'rgba(240, 98, 146, 0.2)',
               'rgba(187, 143, 206, 0.2)'
            ],
         }]
      },
      options: {
         scales: {
            y: {
               beginAtZero: true
            }
         }
      }
   });


<!--   ì›”ë³„ í˜ì´ì§€ìˆ˜ ì°¨íŠ¸-->

   let datax2= [];
   let monthx2 = [];
   <c:forEach items="${userStatVO1}" var="vo">
   datax2.push(${vo.percent});
   monthx2.push('${vo.titleLengthStr}');
   </c:forEach>


   const ctx2 = document.getElementById('myChart2');
   new Chart(ctx2, {
      type: 'line',
      data: {
         labels: monthx2,
         datasets: [{
            label: 'í˜ì´ì§€ë³„',
            data: datax2,
            borderWidth: 1,
            backgroundColor: [
               'rgba(255, 99, 132, 0.2)',
               'rgba(255, 159, 64, 0.2)',
               'rgba(255, 205, 86, 0.2)',
               'rgba(75, 192, 192, 0.2)',
               'rgba(54, 162, 235, 0.2)',
               'rgba(153, 102, 255, 0.2)',
               'rgba(201, 203, 207, 0.2)',
               'rgba(255, 138, 101, 0.2)',
               'rgba(100, 181, 246, 0.2)',
               'rgba(165, 214, 167, 0.2)',
               'rgba(240, 98, 146, 0.2)',
               'rgba(187, 143, 206, 0.2)'
            ],
            borderColor: [
               'rgba(255, 99, 132, 0.2)',
               'rgba(255, 159, 64, 0.2)',
               'rgba(255, 205, 86, 0.2)',
               'rgba(75, 192, 192, 0.2)',
               'rgba(54, 162, 235, 0.2)',
               'rgba(153, 102, 255, 0.2)',
               'rgba(201, 203, 207, 0.2)',
               'rgba(255, 138, 101, 0.2)',
               'rgba(100, 181, 246, 0.2)',
               'rgba(165, 214, 167, 0.2)',
               'rgba(240, 98, 146, 0.2)',
               'rgba(187, 143, 206, 0.2)'
            ],
         }]
      },
      options: { elements: {
               line: {
               borderWidth: 3
            }
         }
      }
   });
</script>